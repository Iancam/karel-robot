<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="Description" content="YA Karel the robot implementation" />
    <base href="/" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"
      integrity="sha256-0SGl1PJNDyJwcV5T+weg2zpEMrh7xvlwO4oXgvZCeZk="
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      data-name="vs/editor/editor.main"
      href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
    <script>
      require.config({
        paths: {
          vs:
            'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs',
        },
      });
      window.MonacoEnvironment = { getWorkerUrl: () => proxy };
      let proxy = URL.createObjectURL(
        new Blob(
          [
            `
    self.MonacoEnvironment = {
        baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
    };
    importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
`,
          ],
          { type: 'text/javascript' }
        )
      );
    </script>
    <script type="module" src="./src/editor.js"></script>
    <link rel="stylesheet" href="./css/tachyons.css" />
    <link rel="stylesheet" href="./css/utils.css" />
    <title>karel-ide</title>
  </head>
  <body>
    <div id="editor" class="absolute ma4 square b--black ba br2"></div>
    <script src="./src/interpreter.js"></script>
    <karel-ide id="karel" class="mb3 mr3 fr bg-near-white"></karel-ide>
    <script type="module">
      import { addEditor } from './src/editor.js';
      import { EditorModel } from './src/editorModel.js';
      let editor = addEditor('editor');
      let karel = document.querySelector('#karel');
      karel.interpret = _runCode;
      EditorModel(editor).then(editor => (karel.editor = editor));
    </script>

    <script type="module" src="./src/karel-ide.js"></script>
  </body>
</html>
